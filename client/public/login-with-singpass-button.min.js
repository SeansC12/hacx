/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /gh/ryanntannn/login-with-singpass-button@0.1.2/login-with-singpass-button.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/**
 * @license
 * Copyright 2024 Government Technology Agency of Singapore
 * SPDX-License-Identifier: BSD-3-Clause
 */
import {
  LitElement,
  html,
  css,
} from "https://cdn.jsdelivr.net/gh/lit/dist@3/all/lit-all.min.js";
const xor = (t, e) => !t != !e,
  redirectToSingpass = function (t) {
    const e = ["clientId", "redirectUri"].filter((e) => !t[e]);
    if (e.length > 0)
      return void console.error(`Missing required fields: ${e.join(", ")}`);
    const s = new URL(
      !1 === t.stg
        ? "https://id.singpass.gov.sg/auth"
        : "https://stg-id.singpass.gov.sg/auth",
    );
    (s.searchParams.set("scope", t.scope || "openid"),
      s.searchParams.set("response_type", t.responseType || "code"),
      s.searchParams.set("client_id", t.clientId),
      s.searchParams.set("redirect_uri", t.redirectUri),
      s.searchParams.set("nonce", crypto.randomUUID()),
      s.searchParams.set("state", t.state || crypto.randomUUID()),
      xor(t.codeChallenge, t.codeChallengeMethod)
        ? console.error(
            "Both codeChallenge and codeChallengeMethod are required",
          )
        : t.codeChallenge &&
          t.codeChallengeMethod &&
          (s.searchParams.set("code_challenge", t.codeChallenge),
          s.searchParams.set("code_challenge_method", t.codeChallengeMethod)),
      t.uiLocale && s.searchParams.set("ui_locale", t.uiLocale),
      t.redirectUriHttpsType &&
        s.searchParams.set("redirect_uri_https_type", t.redirectUriHttpsType),
      t.appLaunchUrl && s.searchParams.set("app_launch_url", t.appLaunchUrl),
      t.esrvc && s.searchParams.set("esrvc", t.esrvc),
      t.acrValues && s.searchParams.set("acr_values", t.acrValues),
      (window.location.href = s));
  };
class LoginWithSingpassButton extends LitElement {
  static get styles() {
    return css`
      :host button {
        width: fit-content;
        height: fit-content;
        margin: 0;
        padding: 0;
        border-radius: 6px;
        border: none;
        transition: background-color 0.2s;
      }

      :host button img {
        margin: 0;
        padding: 0;
      }

      :host button.sm.single {
        width: 173px;
        height: 40px;
      }

      :host button.md.single {
        width: 202px;
        height: 48px;
      }

      :host button.sm.multi {
        width: 106px;
        height: 48px;
      }

      :host button.md.multi {
        width: 110px;
        height: 56px;
      }

      :host button.red {
        background-color: #f4333d;
        border: none;
      }

      :host button.white {
        background-color: #ffffff;
        /* We use this instead to avoid affecting the size of the element */
        box-shadow: inset 0px 0px 0px 1px #c8c9cc;
      }

      :host button:hover {
        cursor: pointer;
      }

      :host button.red:hover {
        background-color: #b0262d;
      }

      :host button.white:hover {
        background-color: #f5f5f7;
      }

      :host button.red:active {
        background-color: #801e23;
      }

      :host button.white:active {
        background-color: #e8e9eb;
      }

      :host button:focus {
        outline-width: 2px;
        outline-color: #f4333d;
        outline-offset: 3px;
      }

      :host button:disabled {
        cursor: not-allowed;
      }

      :host button.red:disabled {
        background-color: #e8e9eb;
      }

      :host button.red:disabled img {
        filter: brightness(0.67);
      }

      :host button.white:disabled {
        background-color: #fff;
        box-shadow: inset 0px 0px 0px 1px #aaabad;
      }

      :host button.white:disabled img {
        filter: grayscale(100%) contrast(0) opacity(0.6);
      }
    `;
  }
  static get properties() {
    return {
      color: { type: String },
      size: { type: String },
      multiline: { type: Boolean },
      disabled: { type: Boolean },
      authOptions: { type: Object },
    };
  }
  constructor() {
    super();
  }
  render() {
    const t = this.color || "red",
      e = this.size || "md",
      s = this.multiline ? "multi" : "single",
      o = [t, e, s].join(" "),
      i = `https://stg.storybook.design.singpass.gov.sg/${t}-${e}-${s}.svg`;
    return html`
      <button
        @click=${this._onClick}
        class=${o}
        ?disabled=${this.disabled}
        aria-label="Login with Singpass"
      >
        <img src=${i} />
      </button>
    `;
  }
  _onClick() {
    (this.dispatchEvent(new CustomEvent("on-click-login-with-singpass")),
      this.authOptions && redirectToSingpass(this.authOptions));
  }
}
((LoginWithSingpassButton.redirectToSingpass = redirectToSingpass),
  (LoginWithSingpassButton.setAuthOptions = function (t) {
    document
      .getElementsByTagName("login-with-singpass-button")[0]
      .setAttribute("authOptions", JSON.stringify(t));
  }));
export { LoginWithSingpassButton };
window.customElements.define(
  "login-with-singpass-button",
  LoginWithSingpassButton,
);
//# sourceMappingURL=/sm/c246f1d1289c213f5d82ac01429f8bf7899ab8e21f89104432ea9c42159f1374.map
